{# KPI Card Component - Jinja2 Macro #}
{# 
使用示例：
{{ kpi_card('1,234', '总客户数', 12.5, 'fa-users') }}
{{ kpi_card('¥89,456', '本月收入', -3.2, 'fa-dollar-sign') }}
{{ kpi_card('4.8/5.0', '满意度评分', 0, 'fa-star', 'warning') }}
#}

{% macro kpi_card(value, label, trending_delta=None, icon_class=None, variant='primary') -%}
<div class="kpi-card kpi-card--{{ variant }}">
    <div class="kpi-card__header">
        {% if icon_class %}
        <div class="kpi-card__icon">
            <i class="fas {{ icon_class }}"></i>
        </div>
        {% endif %}
        <div class="kpi-card__label">{{ label }}</div>
    </div>
    
    <div class="kpi-card__value">{{ value }}</div>
    
    {% if trending_delta is not none %}
    <div class="kpi-card__trend kpi-card__trend--{% if trending_delta > 0 %}up{% elif trending_delta < 0 %}down{% else %}neutral{% endif %}">
        <i class="fas {% if trending_delta > 0 %}fa-arrow-up{% elif trending_delta < 0 %}fa-arrow-down{% else %}fa-minus{% endif %}"></i>
        <span>{{ '%.1f'|format(trending_delta|abs) }}%</span>
    </div>
    {% endif %}
    
    <div class="kpi-card__bg-decoration" aria-hidden="true"></div>
</div>
{%- endmacro %}

{# 完整使用示例 #}
{% if false %}
<!-- 示例：在您的模板中使用 KPI 卡片 -->
{% from 'components/kpi_card.html' import kpi_card %}

<div class="kpi-grid">
    <!-- 基础用法 -->
    {{ kpi_card('1,234', '总客户数') }}
    
    <!-- 带图标 -->
    {{ kpi_card('¥567,890', '本月收入', icon_class='fa-dollar-sign') }}
    
    <!-- 带趋势（正增长） -->
    {{ kpi_card('3,456', '活跃学员', 15.8, 'fa-graduation-cap') }}
    
    <!-- 带趋势（负增长） -->
    {{ kpi_card('89%', '完成率', -5.2, 'fa-check-circle') }}
    
    <!-- 不同变体 -->
    {{ kpi_card('4.8/5.0', '满意度', 2.1, 'fa-star', 'success') }}
    {{ kpi_card('12', '待处理', 0, 'fa-clock', 'warning') }}
    {{ kpi_card('3', '异常', -10.5, 'fa-exclamation-triangle', 'danger') }}
</div>

<!-- 网格布局样式 -->
<style>
.kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-2xl);
}
</style>
{% endif %}