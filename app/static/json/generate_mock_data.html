<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生成模拟数据</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .controls {
            margin-bottom: 20px;
        }
        label {
            display: inline-block;
            width: 120px;
            font-weight: bold;
        }
        input, button {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        button {
            background: #0056b3;
            color: white;
            cursor: pointer;
            margin-left: 10px;
        }
        button:hover {
            background: #004494;
        }
        #output {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow: auto;
        }
        .info {
            color: #666;
            font-size: 14px;
            margin-top: 10px;
        }
        .download-btn {
            background: #28a745;
            margin-top: 15px;
        }
        .download-btn:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DataTable 模拟数据生成器</h1>
        
        <div class="controls">
            <label for="count">生成数量：</label>
            <input type="number" id="count" value="5000" min="1" max="100000">
            <button onclick="generateData()">生成数据</button>
        </div>
        
        <div class="info">
            <p>此工具可生成用于测试 DataTable 虚拟滚动的模拟数据。</p>
            <p>生成的数据包含：ID、姓名、电话、邮箱、状态、金额、创建时间等字段。</p>
        </div>
        
        <div id="output" style="display:none;">
            <pre id="jsonOutput"></pre>
        </div>
        
        <button id="downloadBtn" class="download-btn" style="display:none;" onclick="downloadJSON()">
            下载 JSON 文件
        </button>
    </div>

    <script>
        let generatedData = [];

        // 随机数据池
        const firstNames = ['张', '李', '王', '刘', '陈', '杨', '赵', '黄', '周', '吴', '徐', '孙', '胡', '朱', '高'];
        const lastNames = ['伟', '芳', '娜', '敏', '静', '丽', '强', '磊', '洋', '艳', '勇', '军', '杰', '娟', '涛'];
        const provinces = ['北京', '上海', '广东', '江苏', '浙江', '山东', '河南', '四川', '湖北', '湖南'];
        const cities = ['市', '区', '县'];
        const streets = ['中山路', '解放路', '人民路', '建设路', '文化路', '和平路', '光明路', '新华路'];
        const statuses = ['active', 'pending', 'completed', 'cancelled'];
        const emailDomains = ['qq.com', '163.com', '126.com', 'gmail.com', 'outlook.com', 'foxmail.com'];

        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generatePhone() {
            const prefixes = ['130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '150', '151', '152', '153', '155', '156', '157', '158', '159', '170', '176', '177', '178', '180', '181', '182', '183', '184', '185', '186', '187', '188', '189'];
            return getRandomElement(prefixes) + Math.random().toString().slice(2, 10);
        }

        function generateEmail(name, index) {
            const username = 'user' + index + Math.random().toString(36).substring(2, 6);
            return username + '@' + getRandomElement(emailDomains);
        }

        function generateAddress() {
            return getRandomElement(provinces) + getRandomElement(cities) + getRandomElement(streets) + Math.floor(Math.random() * 999 + 1) + '号';
        }

        function generateDate() {
            const now = new Date();
            const past = new Date(now.getTime() - Math.random() * 365 * 24 * 60 * 60 * 1000);
            return past.toISOString();
        }

        function generateData() {
            const count = parseInt(document.getElementById('count').value);
            if (count < 1 || count > 100000) {
                alert('请输入 1 到 100000 之间的数字');
                return;
            }

            generatedData = [];
            
            for (let i = 1; i <= count; i++) {
                const name = getRandomElement(firstNames) + getRandomElement(lastNames);
                generatedData.push({
                    id: i,
                    name: name,
                    phone: generatePhone(),
                    email: generateEmail(name, i),
                    status: getRandomElement(statuses),
                    amount: Math.floor(Math.random() * 50000 + 1000),
                    address: generateAddress(),
                    created_at: generateDate()
                });
            }

            // 显示前 10 条数据作为预览
            const preview = {
                total: count,
                preview: '前 10 条数据预览',
                data: generatedData.slice(0, 10)
            };

            document.getElementById('jsonOutput').textContent = JSON.stringify(preview, null, 2);
            document.getElementById('output').style.display = 'block';
            document.getElementById('downloadBtn').style.display = 'inline-block';
        }

        function downloadJSON() {
            const dataStr = JSON.stringify(generatedData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `mock_data_${generatedData.length}_rows.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // 初始生成
        window.onload = function() {
            // 自动生成一次示例数据
            generateData();
        };
    </script>
</body>
</html>